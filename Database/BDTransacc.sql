USE [master]
GO
/****** Object:  Database [TransaccionesWebBD]    Script Date: 3/12/2020 6:45:16 ******/
CREATE DATABASE [TransaccionesWebBD]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'TransaccionesWebBD', FILENAME = N'D:\Informatica\Bases_de_Datos\SQL Server\Programa\MSSQL15.MSSQLSERVER\MSSQL\DATA\TransaccionesWebBD.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'TransaccionesWebBD_log', FILENAME = N'D:\Informatica\Bases_de_Datos\SQL Server\Programa\MSSQL15.MSSQLSERVER\MSSQL\DATA\TransaccionesWebBD_log.ldf' , SIZE = 8192KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
 WITH CATALOG_COLLATION = DATABASE_DEFAULT
GO
ALTER DATABASE [TransaccionesWebBD] SET COMPATIBILITY_LEVEL = 150
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [TransaccionesWebBD].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [TransaccionesWebBD] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET ARITHABORT OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [TransaccionesWebBD] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [TransaccionesWebBD] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET  ENABLE_BROKER 
GO
ALTER DATABASE [TransaccionesWebBD] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [TransaccionesWebBD] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET RECOVERY FULL 
GO
ALTER DATABASE [TransaccionesWebBD] SET  MULTI_USER 
GO
ALTER DATABASE [TransaccionesWebBD] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [TransaccionesWebBD] SET DB_CHAINING OFF 
GO
ALTER DATABASE [TransaccionesWebBD] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [TransaccionesWebBD] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [TransaccionesWebBD] SET DELAYED_DURABILITY = DISABLED 
GO
EXEC sys.sp_db_vardecimal_storage_format N'TransaccionesWebBD', N'ON'
GO
ALTER DATABASE [TransaccionesWebBD] SET ENCRYPTION ON
GO
ALTER DATABASE [TransaccionesWebBD] SET QUERY_STORE = OFF
GO
USE [TransaccionesWebBD]
GO
/****** Object:  ColumnMasterKey [CMK_Auto1]    Script Date: 3/12/2020 6:45:17 ******/
CREATE COLUMN MASTER KEY [CMK_Auto1]
WITH
(
	KEY_STORE_PROVIDER_NAME = N'MSSQL_CERTIFICATE_STORE',
	KEY_PATH = N'CurrentUser/my/60065269B84FCE3A171C889EF1B8BBA464CF66E4'
)
GO
/****** Object:  ColumnEncryptionKey [CEK_Auto1]    Script Date: 3/12/2020 6:45:17 ******/
CREATE COLUMN ENCRYPTION KEY [CEK_Auto1]
WITH VALUES
(
	COLUMN_MASTER_KEY = [CMK_Auto1],
	ALGORITHM = 'RSA_OAEP',
	ENCRYPTED_VALUE = 0x016E000001630075007200720065006E00740075007300650072002F006D0079002F00360030003000360035003200360039006200380034006600630065003300610031003700310063003800380039006500660031006200380062006200610034003600340063006600360036006500340083B1E1B0031DDBD040804117E3B9AC27774E19CA6678C42E1E3C4579485A60FFED25C08C9A897EC2CAF9D447DA19B52E308B8365CB01377385FF7FF61AD8F5C38E6531842B106CB9577A5CD684CF6A824CC01033D270A7F239378AA2ED6EB05FB892ABB2FCF7F2838AD57A3CA4E759539BBAD5414F9D985E13A592E471EDFDB108AA5627E1263E606BDC919905DB924D03DD65AFE13E53FB4E3A285540F67AD261B83EB7E3B3B6B052306E95BD9EF333FB4F2D91E9077FCEFFA064874F79B829EE8ADD3273E1A7A67296FBDEA520660198ED499ADD89BB0B140B49EAC7626D5F14192478B11029478ED6FEB2ECE61809D3C486E09D380D82E661F1FD90EED5F9B488454456E9006F82DE515DEAE54ABF1573A0ED7AD9AB497291A350BFEFC1C2ABBC6E6E14E9B5F962D5DA5A5795935D90B6E8EB5FBC1AC1EC1DEB616E105DE588E90BE6F422A5928DEF5C767B084A61CDB73C2237669664D0147B3F40D1E738FC2DE21171A73C33715220EFDA77DE7BCDB2F65BB83E9C523B92D6430DD7EAD8D2C15E2084FE300EA95A1C4D6CB644637032C87729F7B5A12211520254941684142A380ECF25FBF1DEB89B097A08E36A028F20DD03C730755A7DA53CF6A26ABB7576B2F1B3AC4B976A659EF83C890004728D0E321B645B45DCCEC2660C52D013F36B0C5CD124A562AE871C464912ACFFB13EAB14F965925411F824BAA2409E0A
)
GO
/****** Object:  Table [dbo].[Easy_Pay]    Script Date: 3/12/2020 6:45:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Easy_Pay](
	[EPID] [int] IDENTITY(1,1) NOT NULL,
	[USRID] [int] NOT NULL,
	[Usuario] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Nombre] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Correo] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Num_Cuenta] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Cod_Seguridad] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Password] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Fondos] [float] ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
 CONSTRAINT [PK_Easy_Pay_EPID] PRIMARY KEY CLUSTERED 
(
	[EPID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Tarjeta]    Script Date: 3/12/2020 6:45:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tarjeta](
	[TID] [int] IDENTITY(1,1) NOT NULL,
	[USRID] [int] NOT NULL,
	[Usuario] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Nombre] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Correo] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Num_Tarjeta] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Exp_Month] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Exp_Year] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[CVV] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Tipo_Tarjeta] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Tipo] [nvarchar](150) COLLATE Modern_Spanish_BIN2 ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
	[Limite_Tarjeta] [float] ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NULL,
	[Fondos] [float] ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = [CEK_Auto1], ENCRYPTION_TYPE = Deterministic, ALGORITHM = 'AEAD_AES_256_CBC_HMAC_SHA_256') NOT NULL,
 CONSTRAINT [PK_Tarjeta_TID] PRIMARY KEY CLUSTERED 
(
	[TID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
USE [master]
GO
ALTER DATABASE [TransaccionesWebBD] SET  READ_WRITE 
GO
